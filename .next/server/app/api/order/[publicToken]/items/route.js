/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/order/[publicToken]/items/route";
exports.ids = ["app/api/order/[publicToken]/items/route"];
exports.modules = {

/***/ "(rsc)/./app/api/order/[publicToken]/items/route.ts":
/*!****************************************************!*\
  !*** ./app/api/order/[publicToken]/items/route.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase-admin */ \"(rsc)/./lib/supabase-admin.ts\");\n\n\nfunction productCodeToDurationKey(productCode) {\n    if (productCode.endsWith(\"_1_DAY\")) return \"1_day\";\n    if (productCode.endsWith(\"_2_DAY\")) return \"2_day\";\n    if (productCode.endsWith(\"_3_DAY\")) return \"3_day\";\n    return \"4_day\";\n}\nfunction normalizeLoose(value) {\n    return String(value ?? \"\").trim().toLowerCase().replace(/[^a-z0-9]+/g, \"_\").replace(/^_+|_+$/g, \"\");\n}\nfunction durationTypeMatches(productCode, dbValue) {\n    const key = productCodeToDurationKey(productCode);\n    const v = normalizeLoose(dbValue);\n    if (!v) return false;\n    const aliases = {\n        \"1_day\": [\n            \"1_day\",\n            \"one_day\",\n            \"single_day\",\n            \"day_1\",\n            \"oneday\",\n            \"1day\"\n        ],\n        \"2_day\": [\n            \"2_day\",\n            \"two_day\",\n            \"day_2\",\n            \"twoday\",\n            \"2day\"\n        ],\n        \"3_day\": [\n            \"3_day\",\n            \"three_day\",\n            \"day_3\",\n            \"threeday\",\n            \"3day\"\n        ],\n        \"4_day\": [\n            \"4_day\",\n            \"four_day\",\n            \"full_festival\",\n            \"festival\",\n            \"day_4\",\n            \"fourday\",\n            \"4day\"\n        ]\n    };\n    return aliases[key].includes(v);\n}\nfunction categoryMatches(line, dbValue) {\n    const v = normalizeLoose(dbValue);\n    if (!v) return false;\n    if (line.category === \"vip\") return [\n        \"vip\"\n    ].includes(v);\n    return [\n        \"general\",\n        \"ga\",\n        \"general_access\"\n    ].includes(v);\n}\nfunction rowCodeMatches(productCode, row) {\n    const candidates = [\n        row.product_code,\n        row.code,\n        row.slug,\n        row.key,\n        row.product_key,\n        row.internal_code\n    ];\n    const normalizedTarget = normalizeLoose(productCode);\n    return candidates.some((c)=>normalizeLoose(c) === normalizedTarget);\n}\nfunction resolveTicketProductForLine(line, rows) {\n    // 1) Strong match by code if such column exists\n    let match = rows.find((r)=>rowCodeMatches(line.productCode, r));\n    // 2) Fallback by category + duration_type enum/text\n    if (!match) {\n        const filtered = rows.filter((r)=>categoryMatches(line, r.category) && durationTypeMatches(line.productCode, r.duration_type));\n        if (filtered.length === 1) match = filtered[0];\n        if (filtered.length > 1) {\n            // Prefer exact snapshot/product name if available\n            const byName = filtered.find((r)=>normalizeLoose(r.product_name_snapshot ?? r.name ?? r.label) === normalizeLoose(line.name));\n            match = byName ?? filtered[0];\n        }\n    }\n    if (!match) {\n        return {\n            ok: false,\n            message: `Nu am putut mapa produsul ${line.productCode} la ticket_products.id. Verifică tabelul ticket_products (code/product_code sau category + duration_type).`\n        };\n    }\n    return {\n        ok: true,\n        value: {\n            line,\n            ticketProductId: String(match.id),\n            dbCategory: match.category != null ? String(match.category) : undefined,\n            dbDurationType: match.duration_type != null ? String(match.duration_type) : undefined\n        }\n    };\n}\nfunction jsonError(message, status = 400, extra) {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        ok: false,\n        error: {\n            message,\n            ...extra || {}\n        }\n    }, {\n        status\n    });\n}\nfunction normalizeDayCode(input) {\n    const v = String(input).trim().toUpperCase();\n    if (v === \"FRI\") return \"FRI\";\n    if (v === \"SAT\") return \"SAT\";\n    if (v === \"SUN\") return \"SUN\";\n    if (v === \"MON\") return \"MON\";\n    return null;\n}\nfunction uniqueDayCodes(values) {\n    const out = [];\n    const seen = new Set();\n    for (const raw of values || []){\n        const d = normalizeDayCode(raw);\n        if (!d) continue;\n        if (!seen.has(d)) {\n            seen.add(d);\n            out.push(d);\n        }\n    }\n    return out;\n}\nfunction validateSelectedDays(productCode, selected) {\n    switch(productCode){\n        case \"GENERAL_1_DAY\":\n        case \"VIP_1_DAY\":\n            if (selected.length !== 1) {\n                return {\n                    valid: false,\n                    message: `${productCode} necesită exact 1 zi.`\n                };\n            }\n            return {\n                valid: true,\n                days: selected\n            };\n        case \"GENERAL_2_DAY\":\n            {\n                if (selected.length !== 2) {\n                    return {\n                        valid: false,\n                        message: \"GENERAL_2_DAY necesită exact 2 zile.\"\n                    };\n                }\n                // Doar combinații permise: FRI+SUN, FRI+MON, SUN+MON (fără SAT)\n                if (selected.includes(\"SAT\")) {\n                    return {\n                        valid: false,\n                        message: \"GENERAL_2_DAY nu permite Sâmbătă. Alege 2 zile dintre Vineri, Duminică, Luni.\"\n                    };\n                }\n                return {\n                    valid: true,\n                    days: selected\n                };\n            }\n        case \"GENERAL_3_DAY\":\n            {\n                const required = [\n                    \"FRI\",\n                    \"SUN\",\n                    \"MON\"\n                ];\n                if (selected.length !== 3) {\n                    return {\n                        valid: false,\n                        message: \"GENERAL_3_DAY necesită exact 3 zile.\"\n                    };\n                }\n                const same = required.every((d)=>selected.includes(d)) && selected.every((d)=>required.includes(d));\n                if (!same) {\n                    return {\n                        valid: false,\n                        message: \"GENERAL_3_DAY trebuie să fie exact: FRI, SUN, MON.\"\n                    };\n                }\n                return {\n                    valid: true,\n                    days: selected\n                };\n            }\n        case \"GENERAL_4_DAY\":\n        case \"VIP_4_DAY\":\n            {\n                const required = [\n                    \"FRI\",\n                    \"SAT\",\n                    \"SUN\",\n                    \"MON\"\n                ];\n                if (selected.length !== 4) {\n                    return {\n                        valid: false,\n                        message: `${productCode} necesită toate cele 4 zile.`\n                    };\n                }\n                const same = required.every((d)=>selected.includes(d)) && selected.every((d)=>required.includes(d));\n                if (!same) {\n                    return {\n                        valid: false,\n                        message: `${productCode} trebuie să conțină: FRI, SAT, SUN, MON.`\n                    };\n                }\n                return {\n                    valid: true,\n                    days: selected\n                };\n            }\n        default:\n            return {\n                valid: false,\n                message: \"Produs necunoscut.\"\n            };\n    }\n}\nfunction computeLine(productCode, qty, days) {\n    const isVip = productCode.startsWith(\"VIP_\");\n    const category = isVip ? \"vip\" : \"general\";\n    let unitPrice = 0;\n    let name = \"\";\n    let durationLabel = \"\";\n    switch(productCode){\n        case \"GENERAL_1_DAY\":\n            {\n                name = \"Acces General - 1 zi\";\n                durationLabel = \"1 zi\";\n                const d = days[0];\n                unitPrice = d === \"SAT\" ? 80 : 50;\n                break;\n            }\n        case \"GENERAL_2_DAY\":\n            name = \"Acces General - 2 zile\";\n            durationLabel = \"2 zile\";\n            unitPrice = 60;\n            break;\n        case \"GENERAL_3_DAY\":\n            name = \"Acces General - 3 zile\";\n            durationLabel = \"3 zile\";\n            unitPrice = 80;\n            break;\n        case \"GENERAL_4_DAY\":\n            name = \"Acces General - 4 zile\";\n            durationLabel = \"4 zile\";\n            unitPrice = 120;\n            break;\n        case \"VIP_1_DAY\":\n            {\n                name = \"Acces VIP - 1 zi\";\n                durationLabel = \"1 zi\";\n                const d = days[0];\n                unitPrice = d === \"SAT\" ? 350 : 200;\n                break;\n            }\n        case \"VIP_4_DAY\":\n            name = \"Acces VIP - 4 zile\";\n            durationLabel = \"4 zile\";\n            unitPrice = 750;\n            break;\n    }\n    return {\n        productCode,\n        category,\n        name,\n        durationLabel,\n        qty,\n        unitPrice,\n        lineTotal: unitPrice * qty,\n        selectedDayCodes: days\n    };\n}\nasync function fetchEventDays() {\n    // Încercăm cu sort_order, apoi fallback pe day_index, apoi fără order\n    const base = _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"event_days\").select(\"*\");\n    let res = await base.order(\"sort_order\", {\n        ascending: true\n    });\n    if (res.error && String(res.error.message || \"\").includes(\"sort_order\")) {\n        console.warn(\"[order-items] event_days.sort_order missing, retrying without order\");\n        res = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"event_days\").select(\"*\").order(\"day_index\", {\n            ascending: true\n        });\n    }\n    if (res.error && String(res.error.message || \"\").includes(\"day_index\")) {\n        res = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"event_days\").select(\"*\");\n    }\n    return res;\n}\nasync function PUT(req, context) {\n    const { publicToken } = await context.params;\n    try {\n        console.log(\"[order-items] upsert start\", {\n            publicToken,\n            method: \"PUT\",\n            url: req.url\n        });\n        const rawBody = await req.json().catch(()=>({}));\n        console.log(\"[order-items] raw body\", rawBody);\n        const incomingItems = Array.isArray(rawBody.items) ? rawBody.items : [];\n        if (incomingItems.length === 0) {\n            return jsonError(\"Trebuie trimis cel puțin un item.\", 400);\n        }\n        // Validare minimă payload\n        for (const item of incomingItems){\n            if (!item || typeof item !== \"object\") {\n                return jsonError(\"Format item invalid.\", 400);\n            }\n            if (!item.productCode) {\n                return jsonError(\"Lipsește productCode.\", 400);\n            }\n            if (!Number.isInteger(item.qty) || item.qty <= 0) {\n                return jsonError(`Cantitate invalidă pentru ${item.productCode}.`, 400);\n            }\n        }\n        console.log(\"[order-items] parsed incoming items\", incomingItems);\n        // 1) Găsim comanda după public_token\n        const orderRes = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"orders\").select(\"id, public_token, status\").eq(\"public_token\", publicToken).maybeSingle();\n        console.log(\"[order-items] order lookup result\", {\n            found: !!orderRes.data,\n            orderId: orderRes.data?.id,\n            status: orderRes.data?.status,\n            orderError: orderRes.error ?? null\n        });\n        if (orderRes.error) {\n            return jsonError(\"Eroare la citirea comenzii.\", 500, {\n                details: orderRes.error.message,\n                code: orderRes.error.code\n            });\n        }\n        if (!orderRes.data) {\n            return jsonError(\"Comanda nu a fost găsită.\", 404);\n        }\n        if (orderRes.data.status && String(orderRes.data.status) !== \"draft\") {\n            return jsonError(\"Comanda nu mai poate fi modificată.\", 409);\n        }\n        const orderId = orderRes.data.id;\n        // 2) Citim zilele (pentru mapare day_code -> id)\n        const { data: eventDays, error: daysError } = await fetchEventDays();\n        console.log(\"[order-items] event days\", eventDays ?? null);\n        if (daysError) {\n            console.error(\"[order-items] daysError\", daysError);\n            return jsonError(\"Eroare la citirea zilelor evenimentului.\", 500, {\n                details: daysError.message,\n                code: daysError.code\n            });\n        }\n        const dayCodeToId = new Map();\n        for (const row of eventDays || []){\n            const code = normalizeDayCode(row.day_code);\n            if (!code) continue;\n            const id = String(row.id ?? \"\");\n            if (id) dayCodeToId.set(code, id);\n        }\n        console.log(\"[order-items] dayCodeToId keys\", [\n            ...dayCodeToId.keys()\n        ]);\n        // 3) Normalizare + validare + pricing\n        const normalizedLines = [];\n        for (const item of incomingItems){\n            const normalizedInputDays = uniqueDayCodes(item.selectedDayCodes);\n            console.log(\"[order-items] validating item\", {\n                productCode: item.productCode,\n                qty: item.qty,\n                selectedDayCodes: item.selectedDayCodes\n            });\n            const validation = validateSelectedDays(item.productCode, normalizedInputDays);\n            console.log(\"[order-items] validation result\", {\n                productCode: item.productCode,\n                inputDays: item.selectedDayCodes,\n                normalizedInputDays,\n                validation\n            });\n            if (!validation.valid) {\n                return jsonError(validation.message, 400);\n            }\n            // verificăm că există zilele în DB\n            for (const d of validation.days){\n                if (!dayCodeToId.has(d)) {\n                    return jsonError(`Ziua ${d} nu există în event_days.`, 500);\n                }\n            }\n            const line = computeLine(item.productCode, item.qty, validation.days);\n            console.log(\"[order-items] computed price\", {\n                productCode: line.productCode,\n                selectedDayCodes: line.selectedDayCodes,\n                qty: line.qty,\n                unitPrice: line.unitPrice,\n                lineTotal: line.lineTotal\n            });\n            normalizedLines.push(line);\n        }\n        console.log(\"[order-items] normalized lines\", normalizedLines);\n        // 3.1) Mapăm fiecare line la ticket_products.id (obligatoriu în schema ta)\n        const ticketProductsRes = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"ticket_products\").select(\"*\");\n        if (ticketProductsRes.error) {\n            return jsonError(\"Eroare la citirea ticket_products.\", 500, {\n                details: ticketProductsRes.error.message,\n                code: ticketProductsRes.error.code\n            });\n        }\n        const ticketProductRows = ticketProductsRes.data || [];\n        console.log(\"[order-items] ticket_products rows\", ticketProductRows);\n        const resolvedLines = [];\n        for (const line of normalizedLines){\n            const resolved = resolveTicketProductForLine(line, ticketProductRows);\n            if (!resolved.ok) {\n                return jsonError(resolved.message, 500, {\n                    productCode: line.productCode,\n                    availableTicketProducts: ticketProductRows.map((r)=>({\n                            id: r.id,\n                            category: r.category,\n                            duration_type: r.duration_type,\n                            code: r.code,\n                            product_code: r.product_code,\n                            name: r.name\n                        }))\n                });\n            }\n            resolvedLines.push(resolved.value);\n        }\n        console.log(\"[order-items] resolved lines -> ticket_products\", resolvedLines.map((x)=>({\n                productCode: x.line.productCode,\n                ticketProductId: x.ticketProductId,\n                dbCategory: x.dbCategory,\n                dbDurationType: x.dbDurationType\n            })));\n        // 4) Ștergem itemele existente + day links + VIP allocations (dacă există)\n        // găsim itemele existente pentru a curăța order_item_days\n        const existingItemsRes = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"order_items\").select(\"id\").eq(\"order_id\", orderId);\n        if (existingItemsRes.error) {\n            return jsonError(\"Eroare la citirea itemelor existente.\", 500, {\n                details: existingItemsRes.error.message,\n                code: existingItemsRes.error.code\n            });\n        }\n        const existingItemIds = (existingItemsRes.data || []).map((x)=>String(x.id));\n        console.log(\"[order-items] existing item ids\", existingItemIds);\n        if (existingItemIds.length > 0) {\n            // order_item_days (fallback dacă coloana e order_item_id / item_id etc. - presupunem order_item_id)\n            const delDaysRes = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"order_item_days\").delete().in(\"order_item_id\", existingItemIds);\n            if (delDaysRes.error && !String(delDaysRes.error.message || \"\").includes(\"order_item_id\")) {\n                console.warn(\"[order-items] order_item_days delete warning\", delDaysRes.error);\n            }\n        }\n        // Curățăm eventuale rezervări VIP pentru că structura biletelor s-a schimbat\n        console.log(\"[order-items] clearing vip reservations for order\", orderId);\n        await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"vip_table_reservation_days\").delete().eq(\"order_id\", orderId);\n        await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"vip_table_reservations\").delete().eq(\"order_id\", orderId);\n        const deleteItemsRes = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"order_items\").delete().eq(\"order_id\", orderId);\n        if (deleteItemsRes.error) {\n            return jsonError(\"Eroare la ștergerea itemelor vechi.\", 500, {\n                details: deleteItemsRes.error.message,\n                code: deleteItemsRes.error.code\n            });\n        }\n        // 5) Inserăm order_items cu fallback pe coloane lipsă (aliniat la schema reală)\n        let includeCategory = true;\n        let includeDurationType = true;\n        let includeVariantLabelSnapshot = true;\n        let includeUnitPriceRon = true;\n        let includeLineTotalRon = true;\n        let includeCanonicalDaySet = true;\n        const buildOrderItemsRows = ()=>{\n            return resolvedLines.map((resolved)=>{\n                const { line } = resolved;\n                const row = {\n                    order_id: orderId,\n                    ticket_product_id: resolved.ticketProductId,\n                    quantity: line.qty\n                };\n                if (includeCategory) row.category = resolved.dbCategory ?? line.category;\n                if (includeDurationType && resolved.dbDurationType) {\n                    // folosim exact valoarea din DB (enum-safe)\n                    row.duration_type = resolved.dbDurationType;\n                }\n                row.product_name_snapshot = line.name;\n                if (includeVariantLabelSnapshot) row.variant_label_snapshot = line.durationLabel;\n                if (includeUnitPriceRon) row.unit_price_ron = line.unitPrice;\n                if (includeLineTotalRon) row.line_total_ron = line.lineTotal;\n                if (includeCanonicalDaySet) row.canonical_day_set = line.selectedDayCodes.join(\",\");\n                return row;\n            });\n        };\n        let insertedItems = null;\n        for(let attempt = 1; attempt <= 8; attempt++){\n            const rows = buildOrderItemsRows();\n            console.log(\"[order-items] insert attempt\", {\n                attempt,\n                includeCategory,\n                includeDurationType,\n                includeVariantLabelSnapshot,\n                includeUnitPriceRon,\n                includeLineTotalRon,\n                includeCanonicalDaySet,\n                rows\n            });\n            const insertRes = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"order_items\").insert(rows).select(\"id\");\n            if (!insertRes.error) {\n                insertedItems = (insertRes.data || []).map((r)=>({\n                        id: String(r.id)\n                    }));\n                break;\n            }\n            const msg = String(insertRes.error.message || \"\");\n            console.error(\"[order-items] insertItemsError\", insertRes.error);\n            if (msg.includes(\"variant_label_snapshot\")) {\n                console.warn(\"[order-items] order_items.variant_label_snapshot missing, retrying without column\");\n                includeVariantLabelSnapshot = false;\n                continue;\n            }\n            if (msg.includes(\"unit_price_ron\")) {\n                console.warn(\"[order-items] order_items.unit_price_ron missing, retrying without column\");\n                includeUnitPriceRon = false;\n                continue;\n            }\n            if (msg.includes(\"line_total_ron\")) {\n                console.warn(\"[order-items] order_items.line_total_ron missing, retrying without column\");\n                includeLineTotalRon = false;\n                continue;\n            }\n            if (msg.includes(\"canonical_day_set\")) {\n                console.warn(\"[order-items] order_items.canonical_day_set missing, retrying without column\");\n                includeCanonicalDaySet = false;\n                continue;\n            }\n            if (msg.includes(\"duration_type\")) {\n                console.warn(\"[order-items] order_items.duration_type missing or incompatible, retrying without column\");\n                includeDurationType = false;\n                continue;\n            }\n            if (msg.includes(\"category\")) {\n                console.warn(\"[order-items] order_items.category missing or incompatible, retrying without column\");\n                includeCategory = false;\n                continue;\n            }\n            if (msg.includes(\"ticket_product_id\")) {\n                return jsonError(\"Schema order_items cere ticket_product_id, dar maparea către ticket_products a eșuat.\", 500, {\n                    details: insertRes.error.message,\n                    code: insertRes.error.code\n                });\n            }\n            return jsonError(\"Eroare la inserarea itemelor.\", 500, {\n                details: insertRes.error.message,\n                code: insertRes.error.code\n            });\n        }\n        if (!insertedItems || insertedItems.length !== normalizedLines.length) {\n            return jsonError(\"Nu s-au putut insera toate itemele.\", 500);\n        }\n        // 6) Inserăm order_item_days (dacă tabela/coloanele există)\n        const dayLinkRows = [];\n        insertedItems.forEach((inserted, index)=>{\n            const line = normalizedLines[index];\n            for (const dayCode of line.selectedDayCodes){\n                const eventDayId = dayCodeToId.get(dayCode);\n                if (!eventDayId) continue;\n                dayLinkRows.push({\n                    order_item_id: inserted.id,\n                    event_day_id: eventDayId\n                });\n            }\n        });\n        if (dayLinkRows.length > 0) {\n            const linkRes = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"order_item_days\").insert(dayLinkRows);\n            if (linkRes.error) {\n                // Nu blocăm flow-ul complet dacă schema diferă, dar logăm\n                console.warn(\"[order-items] order_item_days insert warning\", linkRes.error);\n            }\n        }\n        // 7) Actualizăm totalul în orders (cu fallback dacă coloanele lipsesc)\n        const totalAmount = normalizedLines.reduce((s, x)=>s + x.lineTotal, 0);\n        const totalItems = normalizedLines.reduce((s, x)=>s + x.qty, 0);\n        const updateCandidates = [\n            {\n                total_amount: totalAmount,\n                total_items: totalItems\n            },\n            {\n                total_amount: totalAmount\n            },\n            {\n                total: totalAmount,\n                total_items: totalItems\n            },\n            {\n                total: totalAmount\n            }\n        ];\n        for (const patch of updateCandidates){\n            const updRes = await _lib_supabase_admin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"orders\").update(patch).eq(\"id\", orderId);\n            if (!updRes.error) break;\n            console.warn(\"[order-items] orders total update warning\", {\n                patch,\n                error: updRes.error\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: true,\n            order: {\n                id: orderId,\n                publicToken,\n                status: \"draft\",\n                totalItems,\n                totalAmount\n            },\n            items: normalizedLines.map((x)=>({\n                    productCode: x.productCode,\n                    category: x.category,\n                    qty: x.qty,\n                    unitPrice: x.unitPrice,\n                    lineTotal: x.lineTotal,\n                    selectedDayCodes: x.selectedDayCodes\n                }))\n        });\n    } catch (error) {\n        console.error(\"[order-items] unexpected error\", error);\n        return jsonError(\"Eroare internă la salvarea biletelor.\", 500);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL29yZGVyL1twdWJsaWNUb2tlbl0vaXRlbXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBQ1U7QUE2Q3JELFNBQVNFLHlCQUF5QkMsV0FBd0I7SUFLeEQsSUFBSUEsWUFBWUMsUUFBUSxDQUFDLFdBQVcsT0FBTztJQUMzQyxJQUFJRCxZQUFZQyxRQUFRLENBQUMsV0FBVyxPQUFPO0lBQzNDLElBQUlELFlBQVlDLFFBQVEsQ0FBQyxXQUFXLE9BQU87SUFDM0MsT0FBTztBQUNUO0FBRUEsU0FBU0MsZUFBZUMsS0FBYztJQUNwQyxPQUFPQyxPQUFPRCxTQUFTLElBQ3BCRSxJQUFJLEdBQ0pDLFdBQVcsR0FDWEMsT0FBTyxDQUFDLGVBQWUsS0FDdkJBLE9BQU8sQ0FBQyxZQUFZO0FBQ3pCO0FBRUEsU0FBU0Msb0JBQW9CUixXQUF3QixFQUFFUyxPQUFnQjtJQUNyRSxNQUFNQyxNQUFNWCx5QkFBeUJDO0lBQ3JDLE1BQU1XLElBQUlULGVBQWVPO0lBQ3pCLElBQUksQ0FBQ0UsR0FBRyxPQUFPO0lBRWYsTUFBTUMsVUFBb0M7UUFDeEMsU0FBUztZQUFDO1lBQVM7WUFBVztZQUFjO1lBQVM7WUFBVTtTQUFPO1FBQ3RFLFNBQVM7WUFBQztZQUFTO1lBQVc7WUFBUztZQUFVO1NBQU87UUFDeEQsU0FBUztZQUFDO1lBQVM7WUFBYTtZQUFTO1lBQVk7U0FBTztRQUM1RCxTQUFTO1lBQUM7WUFBUztZQUFZO1lBQWlCO1lBQVk7WUFBUztZQUFXO1NBQU87SUFDekY7SUFFQSxPQUFPQSxPQUFPLENBQUNGLElBQUksQ0FBQ0csUUFBUSxDQUFDRjtBQUMvQjtBQUVBLFNBQVNHLGdCQUFnQkMsSUFBb0IsRUFBRU4sT0FBZ0I7SUFDN0QsTUFBTUUsSUFBSVQsZUFBZU87SUFDekIsSUFBSSxDQUFDRSxHQUFHLE9BQU87SUFDZixJQUFJSSxLQUFLQyxRQUFRLEtBQUssT0FBTyxPQUFPO1FBQUM7S0FBTSxDQUFDSCxRQUFRLENBQUNGO0lBQ3JE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O2dCQUN4RHdGO2dCQUNBN0gsT0FBTzhILE9BQU85SCxLQUFLO1lBQ3JCO1FBQ0Y7UUFFQSxPQUFPdkQscURBQVlBLENBQUNzRCxJQUFJLENBQUM7WUFDdkJWLElBQUk7WUFDSjZDLE9BQU87Z0JBQ0wxQyxJQUFJb0U7Z0JBQ0puQjtnQkFDQTVDLFFBQVE7Z0JBQ1IySDtnQkFDQUg7WUFDRjtZQUNBbEUsT0FBT21CLGdCQUFnQlMsR0FBRyxDQUFDLENBQUNDLElBQU87b0JBQ2pDcEksYUFBYW9JLEVBQUVwSSxXQUFXO29CQUMxQmdCLFVBQVVvSCxFQUFFcEgsUUFBUTtvQkFDcEIwRCxLQUFLMEQsRUFBRTFELEdBQUc7b0JBQ1ZHLFdBQVd1RCxFQUFFdkQsU0FBUztvQkFDdEJFLFdBQVdxRCxFQUFFckQsU0FBUztvQkFDdEJDLGtCQUFrQm9ELEVBQUVwRCxnQkFBZ0I7Z0JBQ3RDO1FBQ0Y7SUFDRixFQUFFLE9BQU81QixPQUFPO1FBQ2RvQyxRQUFRcEMsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsT0FBT0osVUFBVSx5Q0FBeUM7SUFDNUQ7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21paG5lYXNtYWNib29rYWlyL0Rlc2t0b3AvV29yay9iYW5hdG9uLWZlc3QvYXBwL2FwaS9vcmRlci9bcHVibGljVG9rZW5dL2l0ZW1zL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gXCJAL2xpYi9zdXBhYmFzZS1hZG1pblwiO1xuXG50eXBlIERheUNvZGUgPSBcIkZSSVwiIHwgXCJTQVRcIiB8IFwiU1VOXCIgfCBcIk1PTlwiO1xudHlwZSBJbmNvbWluZ0RheUNvZGUgPSBcImZyaVwiIHwgXCJzYXRcIiB8IFwic3VuXCIgfCBcIm1vblwiIHwgRGF5Q29kZTtcblxudHlwZSBQcm9kdWN0Q29kZSA9XG4gIHwgXCJHRU5FUkFMXzFfREFZXCJcbiAgfCBcIkdFTkVSQUxfMl9EQVlcIlxuICB8IFwiR0VORVJBTF8zX0RBWVwiXG4gIHwgXCJHRU5FUkFMXzRfREFZXCJcbiAgfCBcIlZJUF8xX0RBWVwiXG4gIHwgXCJWSVBfNF9EQVlcIjtcblxudHlwZSBJbmNvbWluZ0l0ZW0gPSB7XG4gIHByb2R1Y3RDb2RlOiBQcm9kdWN0Q29kZTtcbiAgcXR5OiBudW1iZXI7XG4gIHNlbGVjdGVkRGF5Q29kZXM/OiBJbmNvbWluZ0RheUNvZGVbXTtcbn07XG5cbnR5cGUgSW5jb21pbmdCb2R5ID0ge1xuICBpdGVtcz86IEluY29taW5nSXRlbVtdO1xufTtcblxudHlwZSBOb3JtYWxpemVkTGluZSA9IHtcbiAgcHJvZHVjdENvZGU6IFByb2R1Y3RDb2RlO1xuICBjYXRlZ29yeTogXCJnZW5lcmFsXCIgfCBcInZpcFwiO1xuICBuYW1lOiBzdHJpbmc7XG4gIGR1cmF0aW9uTGFiZWw6IHN0cmluZztcbiAgcXR5OiBudW1iZXI7XG4gIHVuaXRQcmljZTogbnVtYmVyO1xuICBsaW5lVG90YWw6IG51bWJlcjtcbiAgc2VsZWN0ZWREYXlDb2RlczogRGF5Q29kZVtdO1xufTtcblxudHlwZSBUaWNrZXRQcm9kdWN0Um93ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4gJiB7XG4gIGlkOiBzdHJpbmc7XG59O1xuXG50eXBlIFJlc29sdmVkTGluZSA9IHtcbiAgbGluZTogTm9ybWFsaXplZExpbmU7XG4gIHRpY2tldFByb2R1Y3RJZDogc3RyaW5nO1xuICBkYkNhdGVnb3J5Pzogc3RyaW5nO1xuICBkYkR1cmF0aW9uVHlwZT86IHN0cmluZztcbn07XG5cbmZ1bmN0aW9uIHByb2R1Y3RDb2RlVG9EdXJhdGlvbktleShwcm9kdWN0Q29kZTogUHJvZHVjdENvZGUpOlxuICB8IFwiMV9kYXlcIlxuICB8IFwiMl9kYXlcIlxuICB8IFwiM19kYXlcIlxuICB8IFwiNF9kYXlcIiB7XG4gIGlmIChwcm9kdWN0Q29kZS5lbmRzV2l0aChcIl8xX0RBWVwiKSkgcmV0dXJuIFwiMV9kYXlcIjtcbiAgaWYgKHByb2R1Y3RDb2RlLmVuZHNXaXRoKFwiXzJfREFZXCIpKSByZXR1cm4gXCIyX2RheVwiO1xuICBpZiAocHJvZHVjdENvZGUuZW5kc1dpdGgoXCJfM19EQVlcIikpIHJldHVybiBcIjNfZGF5XCI7XG4gIHJldHVybiBcIjRfZGF5XCI7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUxvb3NlKHZhbHVlOiB1bmtub3duKTogc3RyaW5nIHtcbiAgcmV0dXJuIFN0cmluZyh2YWx1ZSA/PyBcIlwiKVxuICAgIC50cmltKClcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKC9bXmEtejAtOV0rL2csIFwiX1wiKVxuICAgIC5yZXBsYWNlKC9eXyt8XyskL2csIFwiXCIpO1xufVxuXG5mdW5jdGlvbiBkdXJhdGlvblR5cGVNYXRjaGVzKHByb2R1Y3RDb2RlOiBQcm9kdWN0Q29kZSwgZGJWYWx1ZTogdW5rbm93bik6IGJvb2xlYW4ge1xuICBjb25zdCBrZXkgPSBwcm9kdWN0Q29kZVRvRHVyYXRpb25LZXkocHJvZHVjdENvZGUpO1xuICBjb25zdCB2ID0gbm9ybWFsaXplTG9vc2UoZGJWYWx1ZSk7XG4gIGlmICghdikgcmV0dXJuIGZhbHNlO1xuXG4gIGNvbnN0IGFsaWFzZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgICBcIjFfZGF5XCI6IFtcIjFfZGF5XCIsIFwib25lX2RheVwiLCBcInNpbmdsZV9kYXlcIiwgXCJkYXlfMVwiLCBcIm9uZWRheVwiLCBcIjFkYXlcIl0sXG4gICAgXCIyX2RheVwiOiBbXCIyX2RheVwiLCBcInR3b19kYXlcIiwgXCJkYXlfMlwiLCBcInR3b2RheVwiLCBcIjJkYXlcIl0sXG4gICAgXCIzX2RheVwiOiBbXCIzX2RheVwiLCBcInRocmVlX2RheVwiLCBcImRheV8zXCIsIFwidGhyZWVkYXlcIiwgXCIzZGF5XCJdLFxuICAgIFwiNF9kYXlcIjogW1wiNF9kYXlcIiwgXCJmb3VyX2RheVwiLCBcImZ1bGxfZmVzdGl2YWxcIiwgXCJmZXN0aXZhbFwiLCBcImRheV80XCIsIFwiZm91cmRheVwiLCBcIjRkYXlcIl0sXG4gIH07XG5cbiAgcmV0dXJuIGFsaWFzZXNba2V5XS5pbmNsdWRlcyh2KTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcnlNYXRjaGVzKGxpbmU6IE5vcm1hbGl6ZWRMaW5lLCBkYlZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB7XG4gIGNvbnN0IHYgPSBub3JtYWxpemVMb29zZShkYlZhbHVlKTtcbiAgaWYgKCF2KSByZXR1cm4gZmFsc2U7XG4gIGlmIChsaW5lLmNhdGVnb3J5ID09PSBcInZpcFwiKSByZXR1cm4gW1widmlwXCJdLmluY2x1ZGVzKHYpO1xuICByZXR1cm4gW1wiZ2VuZXJhbFwiLCBcImdhXCIsIFwiZ2VuZXJhbF9hY2Nlc3NcIl0uaW5jbHVkZXModik7XG59XG5cbmZ1bmN0aW9uIHJvd0NvZGVNYXRjaGVzKHByb2R1Y3RDb2RlOiBQcm9kdWN0Q29kZSwgcm93OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IGJvb2xlYW4ge1xuICBjb25zdCBjYW5kaWRhdGVzID0gW1xuICAgIHJvdy5wcm9kdWN0X2NvZGUsXG4gICAgcm93LmNvZGUsXG4gICAgcm93LnNsdWcsXG4gICAgcm93LmtleSxcbiAgICByb3cucHJvZHVjdF9rZXksXG4gICAgcm93LmludGVybmFsX2NvZGUsXG4gIF07XG4gIGNvbnN0IG5vcm1hbGl6ZWRUYXJnZXQgPSBub3JtYWxpemVMb29zZShwcm9kdWN0Q29kZSk7XG4gIHJldHVybiBjYW5kaWRhdGVzLnNvbWUoKGMpID0+IG5vcm1hbGl6ZUxvb3NlKGMpID09PSBub3JtYWxpemVkVGFyZ2V0KTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVRpY2tldFByb2R1Y3RGb3JMaW5lKFxuICBsaW5lOiBOb3JtYWxpemVkTGluZSxcbiAgcm93czogVGlja2V0UHJvZHVjdFJvd1tdLFxuKTogeyBvazogdHJ1ZTsgdmFsdWU6IFJlc29sdmVkTGluZSB9IHwgeyBvazogZmFsc2U7IG1lc3NhZ2U6IHN0cmluZyB9IHtcbiAgLy8gMSkgU3Ryb25nIG1hdGNoIGJ5IGNvZGUgaWYgc3VjaCBjb2x1bW4gZXhpc3RzXG4gIGxldCBtYXRjaCA9IHJvd3MuZmluZCgocikgPT4gcm93Q29kZU1hdGNoZXMobGluZS5wcm9kdWN0Q29kZSwgcikpO1xuXG4gIC8vIDIpIEZhbGxiYWNrIGJ5IGNhdGVnb3J5ICsgZHVyYXRpb25fdHlwZSBlbnVtL3RleHRcbiAgaWYgKCFtYXRjaCkge1xuICAgIGNvbnN0IGZpbHRlcmVkID0gcm93cy5maWx0ZXIoXG4gICAgICAocikgPT4gY2F0ZWdvcnlNYXRjaGVzKGxpbmUsIHIuY2F0ZWdvcnkpICYmIGR1cmF0aW9uVHlwZU1hdGNoZXMobGluZS5wcm9kdWN0Q29kZSwgci5kdXJhdGlvbl90eXBlKSxcbiAgICApO1xuICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPT09IDEpIG1hdGNoID0gZmlsdGVyZWRbMF07XG4gICAgaWYgKGZpbHRlcmVkLmxlbmd0aCA+IDEpIHtcbiAgICAgIC8vIFByZWZlciBleGFjdCBzbmFwc2hvdC9wcm9kdWN0IG5hbWUgaWYgYXZhaWxhYmxlXG4gICAgICBjb25zdCBieU5hbWUgPSBmaWx0ZXJlZC5maW5kKFxuICAgICAgICAocikgPT4gbm9ybWFsaXplTG9vc2Uoci5wcm9kdWN0X25hbWVfc25hcHNob3QgPz8gci5uYW1lID8/IHIubGFiZWwpID09PSBub3JtYWxpemVMb29zZShsaW5lLm5hbWUpLFxuICAgICAgKTtcbiAgICAgIG1hdGNoID0gYnlOYW1lID8/IGZpbHRlcmVkWzBdO1xuICAgIH1cbiAgfVxuXG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb2s6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogYE51IGFtIHB1dHV0IG1hcGEgcHJvZHVzdWwgJHtsaW5lLnByb2R1Y3RDb2RlfSBsYSB0aWNrZXRfcHJvZHVjdHMuaWQuIFZlcmlmaWPEgyB0YWJlbHVsIHRpY2tldF9wcm9kdWN0cyAoY29kZS9wcm9kdWN0X2NvZGUgc2F1IGNhdGVnb3J5ICsgZHVyYXRpb25fdHlwZSkuYCxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBvazogdHJ1ZSxcbiAgICB2YWx1ZToge1xuICAgICAgbGluZSxcbiAgICAgIHRpY2tldFByb2R1Y3RJZDogU3RyaW5nKG1hdGNoLmlkKSxcbiAgICAgIGRiQ2F0ZWdvcnk6IG1hdGNoLmNhdGVnb3J5ICE9IG51bGwgPyBTdHJpbmcobWF0Y2guY2F0ZWdvcnkpIDogdW5kZWZpbmVkLFxuICAgICAgZGJEdXJhdGlvblR5cGU6IG1hdGNoLmR1cmF0aW9uX3R5cGUgIT0gbnVsbCA/IFN0cmluZyhtYXRjaC5kdXJhdGlvbl90eXBlKSA6IHVuZGVmaW5lZCxcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBqc29uRXJyb3IoXG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgc3RhdHVzID0gNDAwLFxuICBleHRyYT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuKSB7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICB7IG9rOiBmYWxzZSwgZXJyb3I6IHsgbWVzc2FnZSwgLi4uKGV4dHJhIHx8IHt9KSB9IH0sXG4gICAgeyBzdGF0dXMgfSxcbiAgKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplRGF5Q29kZShpbnB1dDogSW5jb21pbmdEYXlDb2RlKTogRGF5Q29kZSB8IG51bGwge1xuICBjb25zdCB2ID0gU3RyaW5nKGlucHV0KS50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgaWYgKHYgPT09IFwiRlJJXCIpIHJldHVybiBcIkZSSVwiO1xuICBpZiAodiA9PT0gXCJTQVRcIikgcmV0dXJuIFwiU0FUXCI7XG4gIGlmICh2ID09PSBcIlNVTlwiKSByZXR1cm4gXCJTVU5cIjtcbiAgaWYgKHYgPT09IFwiTU9OXCIpIHJldHVybiBcIk1PTlwiO1xuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gdW5pcXVlRGF5Q29kZXModmFsdWVzOiBJbmNvbWluZ0RheUNvZGVbXSB8IHVuZGVmaW5lZCk6IERheUNvZGVbXSB7XG4gIGNvbnN0IG91dDogRGF5Q29kZVtdID0gW107XG4gIGNvbnN0IHNlZW4gPSBuZXcgU2V0PERheUNvZGU+KCk7XG5cbiAgZm9yIChjb25zdCByYXcgb2YgdmFsdWVzIHx8IFtdKSB7XG4gICAgY29uc3QgZCA9IG5vcm1hbGl6ZURheUNvZGUocmF3KTtcbiAgICBpZiAoIWQpIGNvbnRpbnVlO1xuICAgIGlmICghc2Vlbi5oYXMoZCkpIHtcbiAgICAgIHNlZW4uYWRkKGQpO1xuICAgICAgb3V0LnB1c2goZCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVTZWxlY3RlZERheXMoXG4gIHByb2R1Y3RDb2RlOiBQcm9kdWN0Q29kZSxcbiAgc2VsZWN0ZWQ6IERheUNvZGVbXSxcbik6IHsgdmFsaWQ6IHRydWU7IGRheXM6IERheUNvZGVbXSB9IHwgeyB2YWxpZDogZmFsc2U7IG1lc3NhZ2U6IHN0cmluZyB9IHtcbiAgc3dpdGNoIChwcm9kdWN0Q29kZSkge1xuICAgIGNhc2UgXCJHRU5FUkFMXzFfREFZXCI6XG4gICAgY2FzZSBcIlZJUF8xX0RBWVwiOlxuICAgICAgaWYgKHNlbGVjdGVkLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6IGAke3Byb2R1Y3RDb2RlfSBuZWNlc2l0xIMgZXhhY3QgMSB6aS5gIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF5czogc2VsZWN0ZWQgfTtcblxuICAgIGNhc2UgXCJHRU5FUkFMXzJfREFZXCI6IHtcbiAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggIT09IDIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogXCJHRU5FUkFMXzJfREFZIG5lY2VzaXTEgyBleGFjdCAyIHppbGUuXCIsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIERvYXIgY29tYmluYcibaWkgcGVybWlzZTogRlJJK1NVTiwgRlJJK01PTiwgU1VOK01PTiAoZsSDcsSDIFNBVClcbiAgICAgIGlmIChzZWxlY3RlZC5pbmNsdWRlcyhcIlNBVFwiKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOlxuICAgICAgICAgICAgXCJHRU5FUkFMXzJfREFZIG51IHBlcm1pdGUgU8OibWLEg3TEgy4gQWxlZ2UgMiB6aWxlIGRpbnRyZSBWaW5lcmksIER1bWluaWPEgywgTHVuaS5cIixcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRheXM6IHNlbGVjdGVkIH07XG4gICAgfVxuXG4gICAgY2FzZSBcIkdFTkVSQUxfM19EQVlcIjoge1xuICAgICAgY29uc3QgcmVxdWlyZWQ6IERheUNvZGVbXSA9IFtcIkZSSVwiLCBcIlNVTlwiLCBcIk1PTlwiXTtcbiAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggIT09IDMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogXCJHRU5FUkFMXzNfREFZIG5lY2VzaXTEgyBleGFjdCAzIHppbGUuXCIsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCBzYW1lID1cbiAgICAgICAgcmVxdWlyZWQuZXZlcnkoKGQpID0+IHNlbGVjdGVkLmluY2x1ZGVzKGQpKSAmJlxuICAgICAgICBzZWxlY3RlZC5ldmVyeSgoZCkgPT4gcmVxdWlyZWQuaW5jbHVkZXMoZCkpO1xuICAgICAgaWYgKCFzYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiR0VORVJBTF8zX0RBWSB0cmVidWllIHPEgyBmaWUgZXhhY3Q6IEZSSSwgU1VOLCBNT04uXCIsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF5czogc2VsZWN0ZWQgfTtcbiAgICB9XG5cbiAgICBjYXNlIFwiR0VORVJBTF80X0RBWVwiOlxuICAgIGNhc2UgXCJWSVBfNF9EQVlcIjoge1xuICAgICAgY29uc3QgcmVxdWlyZWQ6IERheUNvZGVbXSA9IFtcIkZSSVwiLCBcIlNBVFwiLCBcIlNVTlwiLCBcIk1PTlwiXTtcbiAgICAgIGlmIChzZWxlY3RlZC5sZW5ndGggIT09IDQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogYCR7cHJvZHVjdENvZGV9IG5lY2VzaXTEgyB0b2F0ZSBjZWxlIDQgemlsZS5gLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3Qgc2FtZSA9XG4gICAgICAgIHJlcXVpcmVkLmV2ZXJ5KChkKSA9PiBzZWxlY3RlZC5pbmNsdWRlcyhkKSkgJiZcbiAgICAgICAgc2VsZWN0ZWQuZXZlcnkoKGQpID0+IHJlcXVpcmVkLmluY2x1ZGVzKGQpKTtcbiAgICAgIGlmICghc2FtZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBgJHtwcm9kdWN0Q29kZX0gdHJlYnVpZSBzxIMgY29uyJtpbsSDOiBGUkksIFNBVCwgU1VOLCBNT04uYCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXlzOiBzZWxlY3RlZCB9O1xuICAgIH1cblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6IFwiUHJvZHVzIG5lY3Vub3NjdXQuXCIgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb21wdXRlTGluZShcbiAgcHJvZHVjdENvZGU6IFByb2R1Y3RDb2RlLFxuICBxdHk6IG51bWJlcixcbiAgZGF5czogRGF5Q29kZVtdLFxuKTogTm9ybWFsaXplZExpbmUge1xuICBjb25zdCBpc1ZpcCA9IHByb2R1Y3RDb2RlLnN0YXJ0c1dpdGgoXCJWSVBfXCIpO1xuICBjb25zdCBjYXRlZ29yeTogXCJnZW5lcmFsXCIgfCBcInZpcFwiID0gaXNWaXAgPyBcInZpcFwiIDogXCJnZW5lcmFsXCI7XG5cbiAgbGV0IHVuaXRQcmljZSA9IDA7XG4gIGxldCBuYW1lID0gXCJcIjtcbiAgbGV0IGR1cmF0aW9uTGFiZWwgPSBcIlwiO1xuXG4gIHN3aXRjaCAocHJvZHVjdENvZGUpIHtcbiAgICBjYXNlIFwiR0VORVJBTF8xX0RBWVwiOiB7XG4gICAgICBuYW1lID0gXCJBY2NlcyBHZW5lcmFsIC0gMSB6aVwiO1xuICAgICAgZHVyYXRpb25MYWJlbCA9IFwiMSB6aVwiO1xuICAgICAgY29uc3QgZCA9IGRheXNbMF07XG4gICAgICB1bml0UHJpY2UgPSBkID09PSBcIlNBVFwiID8gODAgOiA1MDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwiR0VORVJBTF8yX0RBWVwiOlxuICAgICAgbmFtZSA9IFwiQWNjZXMgR2VuZXJhbCAtIDIgemlsZVwiO1xuICAgICAgZHVyYXRpb25MYWJlbCA9IFwiMiB6aWxlXCI7XG4gICAgICB1bml0UHJpY2UgPSA2MDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJHRU5FUkFMXzNfREFZXCI6XG4gICAgICBuYW1lID0gXCJBY2NlcyBHZW5lcmFsIC0gMyB6aWxlXCI7XG4gICAgICBkdXJhdGlvbkxhYmVsID0gXCIzIHppbGVcIjtcbiAgICAgIHVuaXRQcmljZSA9IDgwO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIkdFTkVSQUxfNF9EQVlcIjpcbiAgICAgIG5hbWUgPSBcIkFjY2VzIEdlbmVyYWwgLSA0IHppbGVcIjtcbiAgICAgIGR1cmF0aW9uTGFiZWwgPSBcIjQgemlsZVwiO1xuICAgICAgdW5pdFByaWNlID0gMTIwO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlZJUF8xX0RBWVwiOiB7XG4gICAgICBuYW1lID0gXCJBY2NlcyBWSVAgLSAxIHppXCI7XG4gICAgICBkdXJhdGlvbkxhYmVsID0gXCIxIHppXCI7XG4gICAgICBjb25zdCBkID0gZGF5c1swXTtcbiAgICAgIHVuaXRQcmljZSA9IGQgPT09IFwiU0FUXCIgPyAzNTAgOiAyMDA7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcIlZJUF80X0RBWVwiOlxuICAgICAgbmFtZSA9IFwiQWNjZXMgVklQIC0gNCB6aWxlXCI7XG4gICAgICBkdXJhdGlvbkxhYmVsID0gXCI0IHppbGVcIjtcbiAgICAgIHVuaXRQcmljZSA9IDc1MDtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9kdWN0Q29kZSxcbiAgICBjYXRlZ29yeSxcbiAgICBuYW1lLFxuICAgIGR1cmF0aW9uTGFiZWwsXG4gICAgcXR5LFxuICAgIHVuaXRQcmljZSxcbiAgICBsaW5lVG90YWw6IHVuaXRQcmljZSAqIHF0eSxcbiAgICBzZWxlY3RlZERheUNvZGVzOiBkYXlzLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaEV2ZW50RGF5cygpIHtcbiAgLy8gw45uY2VyY8SDbSBjdSBzb3J0X29yZGVyLCBhcG9pIGZhbGxiYWNrIHBlIGRheV9pbmRleCwgYXBvaSBmxINyxIMgb3JkZXJcbiAgY29uc3QgYmFzZSA9IHN1cGFiYXNlQWRtaW4uZnJvbShcImV2ZW50X2RheXNcIikuc2VsZWN0KFwiKlwiKTtcblxuICBsZXQgcmVzID0gYXdhaXQgYmFzZS5vcmRlcihcInNvcnRfb3JkZXJcIiwgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG4gIGlmIChyZXMuZXJyb3IgJiYgU3RyaW5nKHJlcy5lcnJvci5tZXNzYWdlIHx8IFwiXCIpLmluY2x1ZGVzKFwic29ydF9vcmRlclwiKSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiW29yZGVyLWl0ZW1zXSBldmVudF9kYXlzLnNvcnRfb3JkZXIgbWlzc2luZywgcmV0cnlpbmcgd2l0aG91dCBvcmRlclwiLFxuICAgICk7XG4gICAgcmVzID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oXCJldmVudF9kYXlzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLm9yZGVyKFwiZGF5X2luZGV4XCIsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xuICB9XG4gIGlmIChyZXMuZXJyb3IgJiYgU3RyaW5nKHJlcy5lcnJvci5tZXNzYWdlIHx8IFwiXCIpLmluY2x1ZGVzKFwiZGF5X2luZGV4XCIpKSB7XG4gICAgcmVzID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5mcm9tKFwiZXZlbnRfZGF5c1wiKS5zZWxlY3QoXCIqXCIpO1xuICB9XG5cbiAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChcbiAgcmVxOiBSZXF1ZXN0LFxuICBjb250ZXh0OiB7IHBhcmFtczogUHJvbWlzZTx7IHB1YmxpY1Rva2VuOiBzdHJpbmcgfT4gfSxcbikge1xuICBjb25zdCB7IHB1YmxpY1Rva2VuIH0gPSBhd2FpdCBjb250ZXh0LnBhcmFtcztcblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiW29yZGVyLWl0ZW1zXSB1cHNlcnQgc3RhcnRcIiwge1xuICAgICAgcHVibGljVG9rZW4sXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICB1cmw6IHJlcS51cmwsXG4gICAgfSk7XG5cbiAgICBjb25zdCByYXdCb2R5ID0gKGF3YWl0IHJlcS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSkpIGFzIEluY29taW5nQm9keTtcbiAgICBjb25zb2xlLmxvZyhcIltvcmRlci1pdGVtc10gcmF3IGJvZHlcIiwgcmF3Qm9keSk7XG5cbiAgICBjb25zdCBpbmNvbWluZ0l0ZW1zID0gQXJyYXkuaXNBcnJheShyYXdCb2R5Lml0ZW1zKSA/IHJhd0JvZHkuaXRlbXMgOiBbXTtcbiAgICBpZiAoaW5jb21pbmdJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBqc29uRXJyb3IoXCJUcmVidWllIHRyaW1pcyBjZWwgcHXIm2luIHVuIGl0ZW0uXCIsIDQwMCk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhcmUgbWluaW3EgyBwYXlsb2FkXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGluY29taW5nSXRlbXMpIHtcbiAgICAgIGlmICghaXRlbSB8fCB0eXBlb2YgaXRlbSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICByZXR1cm4ganNvbkVycm9yKFwiRm9ybWF0IGl0ZW0gaW52YWxpZC5cIiwgNDAwKTtcbiAgICAgIH1cbiAgICAgIGlmICghaXRlbS5wcm9kdWN0Q29kZSkge1xuICAgICAgICByZXR1cm4ganNvbkVycm9yKFwiTGlwc2XImXRlIHByb2R1Y3RDb2RlLlwiLCA0MDApO1xuICAgICAgfVxuICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGl0ZW0ucXR5KSB8fCBpdGVtLnF0eSA8PSAwKSB7XG4gICAgICAgIHJldHVybiBqc29uRXJyb3IoYENhbnRpdGF0ZSBpbnZhbGlkxIMgcGVudHJ1ICR7aXRlbS5wcm9kdWN0Q29kZX0uYCwgNDAwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIltvcmRlci1pdGVtc10gcGFyc2VkIGluY29taW5nIGl0ZW1zXCIsIGluY29taW5nSXRlbXMpO1xuXG4gICAgLy8gMSkgR8SDc2ltIGNvbWFuZGEgZHVwxIMgcHVibGljX3Rva2VuXG4gICAgY29uc3Qgb3JkZXJSZXMgPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbShcIm9yZGVyc1wiKVxuICAgICAgLnNlbGVjdChcImlkLCBwdWJsaWNfdG9rZW4sIHN0YXR1c1wiKVxuICAgICAgLmVxKFwicHVibGljX3Rva2VuXCIsIHB1YmxpY1Rva2VuKVxuICAgICAgLm1heWJlU2luZ2xlKCk7XG5cbiAgICBjb25zb2xlLmxvZyhcIltvcmRlci1pdGVtc10gb3JkZXIgbG9va3VwIHJlc3VsdFwiLCB7XG4gICAgICBmb3VuZDogISFvcmRlclJlcy5kYXRhLFxuICAgICAgb3JkZXJJZDogb3JkZXJSZXMuZGF0YT8uaWQsXG4gICAgICBzdGF0dXM6IG9yZGVyUmVzLmRhdGE/LnN0YXR1cyxcbiAgICAgIG9yZGVyRXJyb3I6IG9yZGVyUmVzLmVycm9yID8/IG51bGwsXG4gICAgfSk7XG5cbiAgICBpZiAob3JkZXJSZXMuZXJyb3IpIHtcbiAgICAgIHJldHVybiBqc29uRXJyb3IoXCJFcm9hcmUgbGEgY2l0aXJlYSBjb21lbnppaS5cIiwgNTAwLCB7XG4gICAgICAgIGRldGFpbHM6IG9yZGVyUmVzLmVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IG9yZGVyUmVzLmVycm9yLmNvZGUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIW9yZGVyUmVzLmRhdGEpIHtcbiAgICAgIHJldHVybiBqc29uRXJyb3IoXCJDb21hbmRhIG51IGEgZm9zdCBnxINzaXTEgy5cIiwgNDA0KTtcbiAgICB9XG5cbiAgICBpZiAob3JkZXJSZXMuZGF0YS5zdGF0dXMgJiYgU3RyaW5nKG9yZGVyUmVzLmRhdGEuc3RhdHVzKSAhPT0gXCJkcmFmdFwiKSB7XG4gICAgICByZXR1cm4ganNvbkVycm9yKFwiQ29tYW5kYSBudSBtYWkgcG9hdGUgZmkgbW9kaWZpY2F0xIMuXCIsIDQwOSk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3JkZXJJZCA9IG9yZGVyUmVzLmRhdGEuaWQ7XG5cbiAgICAvLyAyKSBDaXRpbSB6aWxlbGUgKHBlbnRydSBtYXBhcmUgZGF5X2NvZGUgLT4gaWQpXG4gICAgY29uc3QgeyBkYXRhOiBldmVudERheXMsIGVycm9yOiBkYXlzRXJyb3IgfSA9IGF3YWl0IGZldGNoRXZlbnREYXlzKCk7XG5cbiAgICBjb25zb2xlLmxvZyhcIltvcmRlci1pdGVtc10gZXZlbnQgZGF5c1wiLCBldmVudERheXMgPz8gbnVsbCk7XG4gICAgaWYgKGRheXNFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIltvcmRlci1pdGVtc10gZGF5c0Vycm9yXCIsIGRheXNFcnJvcik7XG4gICAgICByZXR1cm4ganNvbkVycm9yKFwiRXJvYXJlIGxhIGNpdGlyZWEgemlsZWxvciBldmVuaW1lbnR1bHVpLlwiLCA1MDAsIHtcbiAgICAgICAgZGV0YWlsczogZGF5c0Vycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGRheXNFcnJvci5jb2RlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGF5Q29kZVRvSWQgPSBuZXcgTWFwPERheUNvZGUsIHN0cmluZz4oKTtcbiAgICBmb3IgKGNvbnN0IHJvdyBvZiBldmVudERheXMgfHwgW10pIHtcbiAgICAgIGNvbnN0IGNvZGUgPSBub3JtYWxpemVEYXlDb2RlKFxuICAgICAgICAocm93IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5kYXlfY29kZSBhcyBJbmNvbWluZ0RheUNvZGUsXG4gICAgICApO1xuICAgICAgaWYgKCFjb2RlKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IGlkID0gU3RyaW5nKChyb3cgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLmlkID8/IFwiXCIpO1xuICAgICAgaWYgKGlkKSBkYXlDb2RlVG9JZC5zZXQoY29kZSwgaWQpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiW29yZGVyLWl0ZW1zXSBkYXlDb2RlVG9JZCBrZXlzXCIsIFsuLi5kYXlDb2RlVG9JZC5rZXlzKCldKTtcblxuICAgIC8vIDMpIE5vcm1hbGl6YXJlICsgdmFsaWRhcmUgKyBwcmljaW5nXG4gICAgY29uc3Qgbm9ybWFsaXplZExpbmVzOiBOb3JtYWxpemVkTGluZVtdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaW5jb21pbmdJdGVtcykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZElucHV0RGF5cyA9IHVuaXF1ZURheUNvZGVzKGl0ZW0uc2VsZWN0ZWREYXlDb2Rlcyk7XG4gICAgICBjb25zb2xlLmxvZyhcIltvcmRlci1pdGVtc10gdmFsaWRhdGluZyBpdGVtXCIsIHtcbiAgICAgICAgcHJvZHVjdENvZGU6IGl0ZW0ucHJvZHVjdENvZGUsXG4gICAgICAgIHF0eTogaXRlbS5xdHksXG4gICAgICAgIHNlbGVjdGVkRGF5Q29kZXM6IGl0ZW0uc2VsZWN0ZWREYXlDb2RlcyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVTZWxlY3RlZERheXMoXG4gICAgICAgIGl0ZW0ucHJvZHVjdENvZGUsXG4gICAgICAgIG5vcm1hbGl6ZWRJbnB1dERheXMsXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlLmxvZyhcIltvcmRlci1pdGVtc10gdmFsaWRhdGlvbiByZXN1bHRcIiwge1xuICAgICAgICBwcm9kdWN0Q29kZTogaXRlbS5wcm9kdWN0Q29kZSxcbiAgICAgICAgaW5wdXREYXlzOiBpdGVtLnNlbGVjdGVkRGF5Q29kZXMsXG4gICAgICAgIG5vcm1hbGl6ZWRJbnB1dERheXMsXG4gICAgICAgIHZhbGlkYXRpb24sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF2YWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgIHJldHVybiBqc29uRXJyb3IodmFsaWRhdGlvbi5tZXNzYWdlLCA0MDApO1xuICAgICAgfVxuXG4gICAgICAvLyB2ZXJpZmljxINtIGPEgyBleGlzdMSDIHppbGVsZSDDrm4gREJcbiAgICAgIGZvciAoY29uc3QgZCBvZiB2YWxpZGF0aW9uLmRheXMpIHtcbiAgICAgICAgaWYgKCFkYXlDb2RlVG9JZC5oYXMoZCkpIHtcbiAgICAgICAgICByZXR1cm4ganNvbkVycm9yKGBaaXVhICR7ZH0gbnUgZXhpc3TEgyDDrm4gZXZlbnRfZGF5cy5gLCA1MDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpbmUgPSBjb21wdXRlTGluZShpdGVtLnByb2R1Y3RDb2RlLCBpdGVtLnF0eSwgdmFsaWRhdGlvbi5kYXlzKTtcblxuICAgICAgY29uc29sZS5sb2coXCJbb3JkZXItaXRlbXNdIGNvbXB1dGVkIHByaWNlXCIsIHtcbiAgICAgICAgcHJvZHVjdENvZGU6IGxpbmUucHJvZHVjdENvZGUsXG4gICAgICAgIHNlbGVjdGVkRGF5Q29kZXM6IGxpbmUuc2VsZWN0ZWREYXlDb2RlcyxcbiAgICAgICAgcXR5OiBsaW5lLnF0eSxcbiAgICAgICAgdW5pdFByaWNlOiBsaW5lLnVuaXRQcmljZSxcbiAgICAgICAgbGluZVRvdGFsOiBsaW5lLmxpbmVUb3RhbCxcbiAgICAgIH0pO1xuXG4gICAgICBub3JtYWxpemVkTGluZXMucHVzaChsaW5lKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIltvcmRlci1pdGVtc10gbm9ybWFsaXplZCBsaW5lc1wiLCBub3JtYWxpemVkTGluZXMpO1xuXG4gICAgLy8gMy4xKSBNYXDEg20gZmllY2FyZSBsaW5lIGxhIHRpY2tldF9wcm9kdWN0cy5pZCAob2JsaWdhdG9yaXUgw65uIHNjaGVtYSB0YSlcbiAgICBjb25zdCB0aWNrZXRQcm9kdWN0c1JlcyA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKFwidGlja2V0X3Byb2R1Y3RzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKTtcblxuICAgIGlmICh0aWNrZXRQcm9kdWN0c1Jlcy5lcnJvcikge1xuICAgICAgcmV0dXJuIGpzb25FcnJvcihcIkVyb2FyZSBsYSBjaXRpcmVhIHRpY2tldF9wcm9kdWN0cy5cIiwgNTAwLCB7XG4gICAgICAgIGRldGFpbHM6IHRpY2tldFByb2R1Y3RzUmVzLmVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IHRpY2tldFByb2R1Y3RzUmVzLmVycm9yLmNvZGUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB0aWNrZXRQcm9kdWN0Um93cyA9ICh0aWNrZXRQcm9kdWN0c1Jlcy5kYXRhIHx8IFtdKSBhcyBUaWNrZXRQcm9kdWN0Um93W107XG4gICAgY29uc29sZS5sb2coXCJbb3JkZXItaXRlbXNdIHRpY2tldF9wcm9kdWN0cyByb3dzXCIsIHRpY2tldFByb2R1Y3RSb3dzKTtcblxuICAgIGNvbnN0IHJlc29sdmVkTGluZXM6IFJlc29sdmVkTGluZVtdID0gW107XG4gICAgZm9yIChjb25zdCBsaW5lIG9mIG5vcm1hbGl6ZWRMaW5lcykge1xuICAgICAgY29uc3QgcmVzb2x2ZWQgPSByZXNvbHZlVGlja2V0UHJvZHVjdEZvckxpbmUobGluZSwgdGlja2V0UHJvZHVjdFJvd3MpO1xuICAgICAgaWYgKCFyZXNvbHZlZC5vaykge1xuICAgICAgICByZXR1cm4ganNvbkVycm9yKHJlc29sdmVkLm1lc3NhZ2UsIDUwMCwge1xuICAgICAgICAgIHByb2R1Y3RDb2RlOiBsaW5lLnByb2R1Y3RDb2RlLFxuICAgICAgICAgIGF2YWlsYWJsZVRpY2tldFByb2R1Y3RzOiB0aWNrZXRQcm9kdWN0Um93cy5tYXAoKHIpID0+ICh7XG4gICAgICAgICAgICBpZDogci5pZCxcbiAgICAgICAgICAgIGNhdGVnb3J5OiByLmNhdGVnb3J5LFxuICAgICAgICAgICAgZHVyYXRpb25fdHlwZTogci5kdXJhdGlvbl90eXBlLFxuICAgICAgICAgICAgY29kZTogKHIgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLmNvZGUsXG4gICAgICAgICAgICBwcm9kdWN0X2NvZGU6IChyIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5wcm9kdWN0X2NvZGUsXG4gICAgICAgICAgICBuYW1lOiAociBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikubmFtZSxcbiAgICAgICAgICB9KSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZWRMaW5lcy5wdXNoKHJlc29sdmVkLnZhbHVlKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwiW29yZGVyLWl0ZW1zXSByZXNvbHZlZCBsaW5lcyAtPiB0aWNrZXRfcHJvZHVjdHNcIixcbiAgICAgIHJlc29sdmVkTGluZXMubWFwKCh4KSA9PiAoe1xuICAgICAgICBwcm9kdWN0Q29kZTogeC5saW5lLnByb2R1Y3RDb2RlLFxuICAgICAgICB0aWNrZXRQcm9kdWN0SWQ6IHgudGlja2V0UHJvZHVjdElkLFxuICAgICAgICBkYkNhdGVnb3J5OiB4LmRiQ2F0ZWdvcnksXG4gICAgICAgIGRiRHVyYXRpb25UeXBlOiB4LmRiRHVyYXRpb25UeXBlLFxuICAgICAgfSkpLFxuICAgICk7XG5cbiAgICAvLyA0KSDImHRlcmdlbSBpdGVtZWxlIGV4aXN0ZW50ZSArIGRheSBsaW5rcyArIFZJUCBhbGxvY2F0aW9ucyAoZGFjxIMgZXhpc3TEgylcbiAgICAvLyBnxINzaW0gaXRlbWVsZSBleGlzdGVudGUgcGVudHJ1IGEgY3VyxIPIm2Egb3JkZXJfaXRlbV9kYXlzXG4gICAgY29uc3QgZXhpc3RpbmdJdGVtc1JlcyA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKFwib3JkZXJfaXRlbXNcIilcbiAgICAgIC5zZWxlY3QoXCJpZFwiKVxuICAgICAgLmVxKFwib3JkZXJfaWRcIiwgb3JkZXJJZCk7XG5cbiAgICBpZiAoZXhpc3RpbmdJdGVtc1Jlcy5lcnJvcikge1xuICAgICAgcmV0dXJuIGpzb25FcnJvcihcIkVyb2FyZSBsYSBjaXRpcmVhIGl0ZW1lbG9yIGV4aXN0ZW50ZS5cIiwgNTAwLCB7XG4gICAgICAgIGRldGFpbHM6IGV4aXN0aW5nSXRlbXNSZXMuZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZXhpc3RpbmdJdGVtc1Jlcy5lcnJvci5jb2RlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXhpc3RpbmdJdGVtSWRzID0gKGV4aXN0aW5nSXRlbXNSZXMuZGF0YSB8fCBbXSkubWFwKCh4KSA9PlxuICAgICAgU3RyaW5nKHguaWQpLFxuICAgICk7XG4gICAgY29uc29sZS5sb2coXCJbb3JkZXItaXRlbXNdIGV4aXN0aW5nIGl0ZW0gaWRzXCIsIGV4aXN0aW5nSXRlbUlkcyk7XG5cbiAgICBpZiAoZXhpc3RpbmdJdGVtSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIG9yZGVyX2l0ZW1fZGF5cyAoZmFsbGJhY2sgZGFjxIMgY29sb2FuYSBlIG9yZGVyX2l0ZW1faWQgLyBpdGVtX2lkIGV0Yy4gLSBwcmVzdXB1bmVtIG9yZGVyX2l0ZW1faWQpXG4gICAgICBjb25zdCBkZWxEYXlzUmVzID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbShcIm9yZGVyX2l0ZW1fZGF5c1wiKVxuICAgICAgICAuZGVsZXRlKClcbiAgICAgICAgLmluKFwib3JkZXJfaXRlbV9pZFwiLCBleGlzdGluZ0l0ZW1JZHMpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGRlbERheXNSZXMuZXJyb3IgJiZcbiAgICAgICAgIVN0cmluZyhkZWxEYXlzUmVzLmVycm9yLm1lc3NhZ2UgfHwgXCJcIikuaW5jbHVkZXMoXCJvcmRlcl9pdGVtX2lkXCIpXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiW29yZGVyLWl0ZW1zXSBvcmRlcl9pdGVtX2RheXMgZGVsZXRlIHdhcm5pbmdcIixcbiAgICAgICAgICBkZWxEYXlzUmVzLmVycm9yLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEN1csSDyJvEg20gZXZlbnR1YWxlIHJlemVydsSDcmkgVklQIHBlbnRydSBjxIMgc3RydWN0dXJhIGJpbGV0ZWxvciBzLWEgc2NoaW1iYXRcbiAgICBjb25zb2xlLmxvZyhcIltvcmRlci1pdGVtc10gY2xlYXJpbmcgdmlwIHJlc2VydmF0aW9ucyBmb3Igb3JkZXJcIiwgb3JkZXJJZCk7XG5cbiAgICBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbShcInZpcF90YWJsZV9yZXNlcnZhdGlvbl9kYXlzXCIpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5lcShcIm9yZGVyX2lkXCIsIG9yZGVySWQpO1xuICAgIGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKFwidmlwX3RhYmxlX3Jlc2VydmF0aW9uc1wiKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoXCJvcmRlcl9pZFwiLCBvcmRlcklkKTtcblxuICAgIGNvbnN0IGRlbGV0ZUl0ZW1zUmVzID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oXCJvcmRlcl9pdGVtc1wiKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoXCJvcmRlcl9pZFwiLCBvcmRlcklkKTtcblxuICAgIGlmIChkZWxldGVJdGVtc1Jlcy5lcnJvcikge1xuICAgICAgcmV0dXJuIGpzb25FcnJvcihcIkVyb2FyZSBsYSDImXRlcmdlcmVhIGl0ZW1lbG9yIHZlY2hpLlwiLCA1MDAsIHtcbiAgICAgICAgZGV0YWlsczogZGVsZXRlSXRlbXNSZXMuZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogZGVsZXRlSXRlbXNSZXMuZXJyb3IuY29kZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIDUpIEluc2VyxINtIG9yZGVyX2l0ZW1zIGN1IGZhbGxiYWNrIHBlIGNvbG9hbmUgbGlwc8SDIChhbGluaWF0IGxhIHNjaGVtYSByZWFsxIMpXG4gICAgbGV0IGluY2x1ZGVDYXRlZ29yeSA9IHRydWU7XG4gICAgbGV0IGluY2x1ZGVEdXJhdGlvblR5cGUgPSB0cnVlO1xuICAgIGxldCBpbmNsdWRlVmFyaWFudExhYmVsU25hcHNob3QgPSB0cnVlO1xuICAgIGxldCBpbmNsdWRlVW5pdFByaWNlUm9uID0gdHJ1ZTtcbiAgICBsZXQgaW5jbHVkZUxpbmVUb3RhbFJvbiA9IHRydWU7XG4gICAgbGV0IGluY2x1ZGVDYW5vbmljYWxEYXlTZXQgPSB0cnVlO1xuXG4gICAgY29uc3QgYnVpbGRPcmRlckl0ZW1zUm93cyA9ICgpID0+IHtcbiAgICAgIHJldHVybiByZXNvbHZlZExpbmVzLm1hcCgocmVzb2x2ZWQpID0+IHtcbiAgICAgICAgY29uc3QgeyBsaW5lIH0gPSByZXNvbHZlZDtcbiAgICAgICAgY29uc3Qgcm93OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICB0aWNrZXRfcHJvZHVjdF9pZDogcmVzb2x2ZWQudGlja2V0UHJvZHVjdElkLFxuICAgICAgICAgIHF1YW50aXR5OiBsaW5lLnF0eSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoaW5jbHVkZUNhdGVnb3J5KSByb3cuY2F0ZWdvcnkgPSByZXNvbHZlZC5kYkNhdGVnb3J5ID8/IGxpbmUuY2F0ZWdvcnk7XG4gICAgICAgIGlmIChpbmNsdWRlRHVyYXRpb25UeXBlICYmIHJlc29sdmVkLmRiRHVyYXRpb25UeXBlKSB7XG4gICAgICAgICAgLy8gZm9sb3NpbSBleGFjdCB2YWxvYXJlYSBkaW4gREIgKGVudW0tc2FmZSlcbiAgICAgICAgICByb3cuZHVyYXRpb25fdHlwZSA9IHJlc29sdmVkLmRiRHVyYXRpb25UeXBlO1xuICAgICAgICB9XG4gICAgICAgIHJvdy5wcm9kdWN0X25hbWVfc25hcHNob3QgPSBsaW5lLm5hbWU7XG4gICAgICAgIGlmIChpbmNsdWRlVmFyaWFudExhYmVsU25hcHNob3QpXG4gICAgICAgICAgcm93LnZhcmlhbnRfbGFiZWxfc25hcHNob3QgPSBsaW5lLmR1cmF0aW9uTGFiZWw7XG4gICAgICAgIGlmIChpbmNsdWRlVW5pdFByaWNlUm9uKSByb3cudW5pdF9wcmljZV9yb24gPSBsaW5lLnVuaXRQcmljZTtcbiAgICAgICAgaWYgKGluY2x1ZGVMaW5lVG90YWxSb24pIHJvdy5saW5lX3RvdGFsX3JvbiA9IGxpbmUubGluZVRvdGFsO1xuICAgICAgICBpZiAoaW5jbHVkZUNhbm9uaWNhbERheVNldClcbiAgICAgICAgICByb3cuY2Fub25pY2FsX2RheV9zZXQgPSBsaW5lLnNlbGVjdGVkRGF5Q29kZXMuam9pbihcIixcIik7XG5cbiAgICAgICAgcmV0dXJuIHJvdztcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBsZXQgaW5zZXJ0ZWRJdGVtczogQXJyYXk8eyBpZDogc3RyaW5nIH0+IHwgbnVsbCA9IG51bGw7XG5cbiAgICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSA4OyBhdHRlbXB0KyspIHtcbiAgICAgIGNvbnN0IHJvd3MgPSBidWlsZE9yZGVySXRlbXNSb3dzKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiW29yZGVyLWl0ZW1zXSBpbnNlcnQgYXR0ZW1wdFwiLCB7XG4gICAgICAgIGF0dGVtcHQsXG4gICAgICAgIGluY2x1ZGVDYXRlZ29yeSxcbiAgICAgICAgaW5jbHVkZUR1cmF0aW9uVHlwZSxcbiAgICAgICAgaW5jbHVkZVZhcmlhbnRMYWJlbFNuYXBzaG90LFxuICAgICAgICBpbmNsdWRlVW5pdFByaWNlUm9uLFxuICAgICAgICBpbmNsdWRlTGluZVRvdGFsUm9uLFxuICAgICAgICBpbmNsdWRlQ2Fub25pY2FsRGF5U2V0LFxuICAgICAgICByb3dzLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGluc2VydFJlcyA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oXCJvcmRlcl9pdGVtc1wiKVxuICAgICAgICAuaW5zZXJ0KHJvd3MpXG4gICAgICAgIC5zZWxlY3QoXCJpZFwiKTtcblxuICAgICAgaWYgKCFpbnNlcnRSZXMuZXJyb3IpIHtcbiAgICAgICAgaW5zZXJ0ZWRJdGVtcyA9IChpbnNlcnRSZXMuZGF0YSB8fCBbXSkubWFwKChyKSA9PiAoe1xuICAgICAgICAgIGlkOiBTdHJpbmcoci5pZCksXG4gICAgICAgIH0pKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1zZyA9IFN0cmluZyhpbnNlcnRSZXMuZXJyb3IubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbb3JkZXItaXRlbXNdIGluc2VydEl0ZW1zRXJyb3JcIiwgaW5zZXJ0UmVzLmVycm9yKTtcblxuICAgICAgaWYgKG1zZy5pbmNsdWRlcyhcInZhcmlhbnRfbGFiZWxfc25hcHNob3RcIikpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiW29yZGVyLWl0ZW1zXSBvcmRlcl9pdGVtcy52YXJpYW50X2xhYmVsX3NuYXBzaG90IG1pc3NpbmcsIHJldHJ5aW5nIHdpdGhvdXQgY29sdW1uXCIsXG4gICAgICAgICk7XG4gICAgICAgIGluY2x1ZGVWYXJpYW50TGFiZWxTbmFwc2hvdCA9IGZhbHNlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1zZy5pbmNsdWRlcyhcInVuaXRfcHJpY2Vfcm9uXCIpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIltvcmRlci1pdGVtc10gb3JkZXJfaXRlbXMudW5pdF9wcmljZV9yb24gbWlzc2luZywgcmV0cnlpbmcgd2l0aG91dCBjb2x1bW5cIixcbiAgICAgICAgKTtcbiAgICAgICAgaW5jbHVkZVVuaXRQcmljZVJvbiA9IGZhbHNlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1zZy5pbmNsdWRlcyhcImxpbmVfdG90YWxfcm9uXCIpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIltvcmRlci1pdGVtc10gb3JkZXJfaXRlbXMubGluZV90b3RhbF9yb24gbWlzc2luZywgcmV0cnlpbmcgd2l0aG91dCBjb2x1bW5cIixcbiAgICAgICAgKTtcbiAgICAgICAgaW5jbHVkZUxpbmVUb3RhbFJvbiA9IGZhbHNlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1zZy5pbmNsdWRlcyhcImNhbm9uaWNhbF9kYXlfc2V0XCIpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIltvcmRlci1pdGVtc10gb3JkZXJfaXRlbXMuY2Fub25pY2FsX2RheV9zZXQgbWlzc2luZywgcmV0cnlpbmcgd2l0aG91dCBjb2x1bW5cIixcbiAgICAgICAgKTtcbiAgICAgICAgaW5jbHVkZUNhbm9uaWNhbERheVNldCA9IGZhbHNlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1zZy5pbmNsdWRlcyhcImR1cmF0aW9uX3R5cGVcIikpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiW29yZGVyLWl0ZW1zXSBvcmRlcl9pdGVtcy5kdXJhdGlvbl90eXBlIG1pc3Npbmcgb3IgaW5jb21wYXRpYmxlLCByZXRyeWluZyB3aXRob3V0IGNvbHVtblwiLFxuICAgICAgICApO1xuICAgICAgICBpbmNsdWRlRHVyYXRpb25UeXBlID0gZmFsc2U7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobXNnLmluY2x1ZGVzKFwiY2F0ZWdvcnlcIikpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiW29yZGVyLWl0ZW1zXSBvcmRlcl9pdGVtcy5jYXRlZ29yeSBtaXNzaW5nIG9yIGluY29tcGF0aWJsZSwgcmV0cnlpbmcgd2l0aG91dCBjb2x1bW5cIixcbiAgICAgICAgKTtcbiAgICAgICAgaW5jbHVkZUNhdGVnb3J5ID0gZmFsc2U7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobXNnLmluY2x1ZGVzKFwidGlja2V0X3Byb2R1Y3RfaWRcIikpIHtcbiAgICAgICAgcmV0dXJuIGpzb25FcnJvcihcIlNjaGVtYSBvcmRlcl9pdGVtcyBjZXJlIHRpY2tldF9wcm9kdWN0X2lkLCBkYXIgbWFwYXJlYSBjxIN0cmUgdGlja2V0X3Byb2R1Y3RzIGEgZciZdWF0LlwiLCA1MDAsIHtcbiAgICAgICAgICBkZXRhaWxzOiBpbnNlcnRSZXMuZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBjb2RlOiBpbnNlcnRSZXMuZXJyb3IuY29kZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4ganNvbkVycm9yKFwiRXJvYXJlIGxhIGluc2VyYXJlYSBpdGVtZWxvci5cIiwgNTAwLCB7XG4gICAgICAgIGRldGFpbHM6IGluc2VydFJlcy5lcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBpbnNlcnRSZXMuZXJyb3IuY29kZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghaW5zZXJ0ZWRJdGVtcyB8fCBpbnNlcnRlZEl0ZW1zLmxlbmd0aCAhPT0gbm9ybWFsaXplZExpbmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGpzb25FcnJvcihcIk51IHMtYXUgcHV0dXQgaW5zZXJhIHRvYXRlIGl0ZW1lbGUuXCIsIDUwMCk7XG4gICAgfVxuXG4gICAgLy8gNikgSW5zZXLEg20gb3JkZXJfaXRlbV9kYXlzIChkYWPEgyB0YWJlbGEvY29sb2FuZWxlIGV4aXN0xIMpXG4gICAgY29uc3QgZGF5TGlua1Jvd3M6IEFycmF5PFJlY29yZDxzdHJpbmcsIHVua25vd24+PiA9IFtdO1xuICAgIGluc2VydGVkSXRlbXMuZm9yRWFjaCgoaW5zZXJ0ZWQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBsaW5lID0gbm9ybWFsaXplZExpbmVzW2luZGV4XTtcbiAgICAgIGZvciAoY29uc3QgZGF5Q29kZSBvZiBsaW5lLnNlbGVjdGVkRGF5Q29kZXMpIHtcbiAgICAgICAgY29uc3QgZXZlbnREYXlJZCA9IGRheUNvZGVUb0lkLmdldChkYXlDb2RlKTtcbiAgICAgICAgaWYgKCFldmVudERheUlkKSBjb250aW51ZTtcbiAgICAgICAgZGF5TGlua1Jvd3MucHVzaCh7XG4gICAgICAgICAgb3JkZXJfaXRlbV9pZDogaW5zZXJ0ZWQuaWQsXG4gICAgICAgICAgZXZlbnRfZGF5X2lkOiBldmVudERheUlkLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChkYXlMaW5rUm93cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBsaW5rUmVzID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbShcIm9yZGVyX2l0ZW1fZGF5c1wiKVxuICAgICAgICAuaW5zZXJ0KGRheUxpbmtSb3dzKTtcblxuICAgICAgaWYgKGxpbmtSZXMuZXJyb3IpIHtcbiAgICAgICAgLy8gTnUgYmxvY8SDbSBmbG93LXVsIGNvbXBsZXQgZGFjxIMgc2NoZW1hIGRpZmVyxIMsIGRhciBsb2fEg21cbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiW29yZGVyLWl0ZW1zXSBvcmRlcl9pdGVtX2RheXMgaW5zZXJ0IHdhcm5pbmdcIixcbiAgICAgICAgICBsaW5rUmVzLmVycm9yLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDcpIEFjdHVhbGl6xINtIHRvdGFsdWwgw65uIG9yZGVycyAoY3UgZmFsbGJhY2sgZGFjxIMgY29sb2FuZWxlIGxpcHNlc2MpXG4gICAgY29uc3QgdG90YWxBbW91bnQgPSBub3JtYWxpemVkTGluZXMucmVkdWNlKChzLCB4KSA9PiBzICsgeC5saW5lVG90YWwsIDApO1xuICAgIGNvbnN0IHRvdGFsSXRlbXMgPSBub3JtYWxpemVkTGluZXMucmVkdWNlKChzLCB4KSA9PiBzICsgeC5xdHksIDApO1xuXG4gICAgY29uc3QgdXBkYXRlQ2FuZGlkYXRlczogUmVjb3JkPHN0cmluZywgdW5rbm93bj5bXSA9IFtcbiAgICAgIHsgdG90YWxfYW1vdW50OiB0b3RhbEFtb3VudCwgdG90YWxfaXRlbXM6IHRvdGFsSXRlbXMgfSxcbiAgICAgIHsgdG90YWxfYW1vdW50OiB0b3RhbEFtb3VudCB9LFxuICAgICAgeyB0b3RhbDogdG90YWxBbW91bnQsIHRvdGFsX2l0ZW1zOiB0b3RhbEl0ZW1zIH0sXG4gICAgICB7IHRvdGFsOiB0b3RhbEFtb3VudCB9LFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IHBhdGNoIG9mIHVwZGF0ZUNhbmRpZGF0ZXMpIHtcbiAgICAgIGNvbnN0IHVwZFJlcyA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oXCJvcmRlcnNcIilcbiAgICAgICAgLnVwZGF0ZShwYXRjaClcbiAgICAgICAgLmVxKFwiaWRcIiwgb3JkZXJJZCk7XG4gICAgICBpZiAoIXVwZFJlcy5lcnJvcikgYnJlYWs7XG4gICAgICBjb25zb2xlLndhcm4oXCJbb3JkZXItaXRlbXNdIG9yZGVycyB0b3RhbCB1cGRhdGUgd2FybmluZ1wiLCB7XG4gICAgICAgIHBhdGNoLFxuICAgICAgICBlcnJvcjogdXBkUmVzLmVycm9yLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIG9rOiB0cnVlLFxuICAgICAgb3JkZXI6IHtcbiAgICAgICAgaWQ6IG9yZGVySWQsXG4gICAgICAgIHB1YmxpY1Rva2VuLFxuICAgICAgICBzdGF0dXM6IFwiZHJhZnRcIixcbiAgICAgICAgdG90YWxJdGVtcyxcbiAgICAgICAgdG90YWxBbW91bnQsXG4gICAgICB9LFxuICAgICAgaXRlbXM6IG5vcm1hbGl6ZWRMaW5lcy5tYXAoKHgpID0+ICh7XG4gICAgICAgIHByb2R1Y3RDb2RlOiB4LnByb2R1Y3RDb2RlLFxuICAgICAgICBjYXRlZ29yeTogeC5jYXRlZ29yeSxcbiAgICAgICAgcXR5OiB4LnF0eSxcbiAgICAgICAgdW5pdFByaWNlOiB4LnVuaXRQcmljZSxcbiAgICAgICAgbGluZVRvdGFsOiB4LmxpbmVUb3RhbCxcbiAgICAgICAgc2VsZWN0ZWREYXlDb2RlczogeC5zZWxlY3RlZERheUNvZGVzLFxuICAgICAgfSkpLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbb3JkZXItaXRlbXNdIHVuZXhwZWN0ZWQgZXJyb3JcIiwgZXJyb3IpO1xuICAgIHJldHVybiBqc29uRXJyb3IoXCJFcm9hcmUgaW50ZXJuxIMgbGEgc2FsdmFyZWEgYmlsZXRlbG9yLlwiLCA1MDApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic3VwYWJhc2VBZG1pbiIsInByb2R1Y3RDb2RlVG9EdXJhdGlvbktleSIsInByb2R1Y3RDb2RlIiwiZW5kc1dpdGgiLCJub3JtYWxpemVMb29zZSIsInZhbHVlIiwiU3RyaW5nIiwidHJpbSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsImR1cmF0aW9uVHlwZU1hdGNoZXMiLCJkYlZhbHVlIiwia2V5IiwidiIsImFsaWFzZXMiLCJpbmNsdWRlcyIsImNhdGVnb3J5TWF0Y2hlcyIsImxpbmUiLCJjYXRlZ29yeSIsInJvd0NvZGVNYXRjaGVzIiwicm93IiwiY2FuZGlkYXRlcyIsInByb2R1Y3RfY29kZSIsImNvZGUiLCJzbHVnIiwicHJvZHVjdF9rZXkiLCJpbnRlcm5hbF9jb2RlIiwibm9ybWFsaXplZFRhcmdldCIsInNvbWUiLCJjIiwicmVzb2x2ZVRpY2tldFByb2R1Y3RGb3JMaW5lIiwicm93cyIsIm1hdGNoIiwiZmluZCIsInIiLCJmaWx0ZXJlZCIsImZpbHRlciIsImR1cmF0aW9uX3R5cGUiLCJsZW5ndGgiLCJieU5hbWUiLCJwcm9kdWN0X25hbWVfc25hcHNob3QiLCJuYW1lIiwibGFiZWwiLCJvayIsIm1lc3NhZ2UiLCJ0aWNrZXRQcm9kdWN0SWQiLCJpZCIsImRiQ2F0ZWdvcnkiLCJ1bmRlZmluZWQiLCJkYkR1cmF0aW9uVHlwZSIsImpzb25FcnJvciIsInN0YXR1cyIsImV4dHJhIiwianNvbiIsImVycm9yIiwibm9ybWFsaXplRGF5Q29kZSIsImlucHV0IiwidG9VcHBlckNhc2UiLCJ1bmlxdWVEYXlDb2RlcyIsInZhbHVlcyIsIm91dCIsInNlZW4iLCJTZXQiLCJyYXciLCJkIiwiaGFzIiwiYWRkIiwicHVzaCIsInZhbGlkYXRlU2VsZWN0ZWREYXlzIiwic2VsZWN0ZWQiLCJ2YWxpZCIsImRheXMiLCJyZXF1aXJlZCIsInNhbWUiLCJldmVyeSIsImNvbXB1dGVMaW5lIiwicXR5IiwiaXNWaXAiLCJzdGFydHNXaXRoIiwidW5pdFByaWNlIiwiZHVyYXRpb25MYWJlbCIsImxpbmVUb3RhbCIsInNlbGVjdGVkRGF5Q29kZXMiLCJmZXRjaEV2ZW50RGF5cyIsImJhc2UiLCJmcm9tIiwic2VsZWN0IiwicmVzIiwib3JkZXIiLCJhc2NlbmRpbmciLCJjb25zb2xlIiwid2FybiIsIlBVVCIsInJlcSIsImNvbnRleHQiLCJwdWJsaWNUb2tlbiIsInBhcmFtcyIsImxvZyIsIm1ldGhvZCIsInVybCIsInJhd0JvZHkiLCJjYXRjaCIsImluY29taW5nSXRlbXMiLCJBcnJheSIsImlzQXJyYXkiLCJpdGVtcyIsIml0ZW0iLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJvcmRlclJlcyIsImVxIiwibWF5YmVTaW5nbGUiLCJmb3VuZCIsImRhdGEiLCJvcmRlcklkIiwib3JkZXJFcnJvciIsImRldGFpbHMiLCJldmVudERheXMiLCJkYXlzRXJyb3IiLCJkYXlDb2RlVG9JZCIsIk1hcCIsImRheV9jb2RlIiwic2V0Iiwia2V5cyIsIm5vcm1hbGl6ZWRMaW5lcyIsIm5vcm1hbGl6ZWRJbnB1dERheXMiLCJ2YWxpZGF0aW9uIiwiaW5wdXREYXlzIiwidGlja2V0UHJvZHVjdHNSZXMiLCJ0aWNrZXRQcm9kdWN0Um93cyIsInJlc29sdmVkTGluZXMiLCJyZXNvbHZlZCIsImF2YWlsYWJsZVRpY2tldFByb2R1Y3RzIiwibWFwIiwieCIsImV4aXN0aW5nSXRlbXNSZXMiLCJleGlzdGluZ0l0ZW1JZHMiLCJkZWxEYXlzUmVzIiwiZGVsZXRlIiwiaW4iLCJkZWxldGVJdGVtc1JlcyIsImluY2x1ZGVDYXRlZ29yeSIsImluY2x1ZGVEdXJhdGlvblR5cGUiLCJpbmNsdWRlVmFyaWFudExhYmVsU25hcHNob3QiLCJpbmNsdWRlVW5pdFByaWNlUm9uIiwiaW5jbHVkZUxpbmVUb3RhbFJvbiIsImluY2x1ZGVDYW5vbmljYWxEYXlTZXQiLCJidWlsZE9yZGVySXRlbXNSb3dzIiwib3JkZXJfaWQiLCJ0aWNrZXRfcHJvZHVjdF9pZCIsInF1YW50aXR5IiwidmFyaWFudF9sYWJlbF9zbmFwc2hvdCIsInVuaXRfcHJpY2Vfcm9uIiwibGluZV90b3RhbF9yb24iLCJjYW5vbmljYWxfZGF5X3NldCIsImpvaW4iLCJpbnNlcnRlZEl0ZW1zIiwiYXR0ZW1wdCIsImluc2VydFJlcyIsImluc2VydCIsIm1zZyIsImRheUxpbmtSb3dzIiwiZm9yRWFjaCIsImluc2VydGVkIiwiaW5kZXgiLCJkYXlDb2RlIiwiZXZlbnREYXlJZCIsImdldCIsIm9yZGVyX2l0ZW1faWQiLCJldmVudF9kYXlfaWQiLCJsaW5rUmVzIiwidG90YWxBbW91bnQiLCJyZWR1Y2UiLCJzIiwidG90YWxJdGVtcyIsInVwZGF0ZUNhbmRpZGF0ZXMiLCJ0b3RhbF9hbW91bnQiLCJ0b3RhbF9pdGVtcyIsInRvdGFsIiwicGF0Y2giLCJ1cGRSZXMiLCJ1cGRhdGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/order/[publicToken]/items/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-admin.ts":
/*!*******************************!*\
  !*** ./lib/supabase-admin.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n\nconst supabaseUrl = \"https://myqtgkuqccoedfqsdiji.supabase.co\";\nconst serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl) throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL\");\nif (!serviceRoleKey) throw new Error(\"Missing SUPABASE_SERVICE_ROLE_KEY\");\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, serviceRoleKey, {\n    auth: {\n        persistSession: false,\n        autoRefreshToken: false\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UtYWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFFckQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGlCQUFpQkgsUUFBUUMsR0FBRyxDQUFDRyx5QkFBeUI7QUFFNUQsSUFBSSxDQUFDTCxhQUFhLE1BQU0sSUFBSU0sTUFBTTtBQUNsQyxJQUFJLENBQUNGLGdCQUFnQixNQUFNLElBQUlFLE1BQU07QUFFOUIsTUFBTUMsZ0JBQWdCUixtRUFBWUEsQ0FBQ0MsYUFBYUksZ0JBQWdCO0lBQ3JFSSxNQUFNO1FBQ0pDLGdCQUFnQjtRQUNoQkMsa0JBQWtCO0lBQ3BCO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL21paG5lYXNtYWNib29rYWlyL0Rlc2t0b3AvV29yay9iYW5hdG9uLWZlc3QvbGliL3N1cGFiYXNlLWFkbWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3VwYWJhc2UtanNcIjtcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG5jb25zdCBzZXJ2aWNlUm9sZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVk7XG5cbmlmICghc3VwYWJhc2VVcmwpIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXCIpO1xuaWYgKCFzZXJ2aWNlUm9sZUtleSkgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZXCIpO1xuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc2VydmljZVJvbGVLZXksIHtcbiAgYXV0aDoge1xuICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgfSxcbn0pOyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzZXJ2aWNlUm9sZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJFcnJvciIsInN1cGFiYXNlQWRtaW4iLCJhdXRoIiwicGVyc2lzdFNlc3Npb24iLCJhdXRvUmVmcmVzaFRva2VuIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-admin.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute&page=%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute.ts&appDir=%2FUsers%2Fmihneasmacbookair%2FDesktop%2FWork%2Fbanaton-fest%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmihneasmacbookair%2FDesktop%2FWork%2Fbanaton-fest&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute&page=%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute.ts&appDir=%2FUsers%2Fmihneasmacbookair%2FDesktop%2FWork%2Fbanaton-fest%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmihneasmacbookair%2FDesktop%2FWork%2Fbanaton-fest&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mihneasmacbookair_Desktop_Work_banaton_fest_app_api_order_publicToken_items_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/order/[publicToken]/items/route.ts */ \"(rsc)/./app/api/order/[publicToken]/items/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/order/[publicToken]/items/route\",\n        pathname: \"/api/order/[publicToken]/items\",\n        filename: \"route\",\n        bundlePath: \"app/api/order/[publicToken]/items/route\"\n    },\n    resolvedPagePath: \"/Users/mihneasmacbookair/Desktop/Work/banaton-fest/app/api/order/[publicToken]/items/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mihneasmacbookair_Desktop_Work_banaton_fest_app_api_order_publicToken_items_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlciUyRiU1QnB1YmxpY1Rva2VuJTVEJTJGaXRlbXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9yZGVyJTJGJTVCcHVibGljVG9rZW4lNUQlMkZpdGVtcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9yZGVyJTJGJTVCcHVibGljVG9rZW4lNUQlMkZpdGVtcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1paG5lYXNtYWNib29rYWlyJTJGRGVza3RvcCUyRldvcmslMkZiYW5hdG9uLWZlc3QlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWlobmVhc21hY2Jvb2thaXIlMkZEZXNrdG9wJTJGV29yayUyRmJhbmF0b24tZmVzdCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDNkM7QUFDMUg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9taWhuZWFzbWFjYm9va2Fpci9EZXNrdG9wL1dvcmsvYmFuYXRvbi1mZXN0L2FwcC9hcGkvb3JkZXIvW3B1YmxpY1Rva2VuXS9pdGVtcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvb3JkZXIvW3B1YmxpY1Rva2VuXS9pdGVtcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL29yZGVyL1twdWJsaWNUb2tlbl0vaXRlbXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL29yZGVyL1twdWJsaWNUb2tlbl0vaXRlbXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWlobmVhc21hY2Jvb2thaXIvRGVza3RvcC9Xb3JrL2JhbmF0b24tZmVzdC9hcHAvYXBpL29yZGVyL1twdWJsaWNUb2tlbl0vaXRlbXMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute&page=%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute.ts&appDir=%2FUsers%2Fmihneasmacbookair%2FDesktop%2FWork%2Fbanaton-fest%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmihneasmacbookair%2FDesktop%2FWork%2Fbanaton-fest&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute&page=%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forder%2F%5BpublicToken%5D%2Fitems%2Froute.ts&appDir=%2FUsers%2Fmihneasmacbookair%2FDesktop%2FWork%2Fbanaton-fest%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmihneasmacbookair%2FDesktop%2FWork%2Fbanaton-fest&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();